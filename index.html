<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Economy Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .topnav {
            background-color: #333;
            overflow: hidden;
        }

        .topnav a {
            float: left;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }

        .topnav a:hover {
            background-color: #ddd;
            color: black;
        }

        .content {
            padding: 20px;
            display: none;
            background-color: white;
            border-radius: 5px;
            margin: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .content.active {
            display: block;
        }
    </style>
</head>

<body>
    <div class="topnav">
        <a href="javascript:void(0)" onclick="showTab('workTab')">Work</a>
        <a href="javascript:void(0)" onclick="showTab('searchTab')">Search</a>
        <a href="javascript:void(0)" onclick="showTab('crimeTab')">Crime</a>
        <a href="javascript:void(0)" onclick="showTab('huntTab')">Hunt</a>
        <a href="javascript:void(0)" onclick="showTab('fishTab')">Fish</a>
        <a href="javascript:void(0)" onclick="showTab('shopTab')">Shop</a>
        <a href="javascript:void(0)" onclick="showTab('bankTab')">Bank</a>
        <a href="javascript:void(0)" onclick="loadGame()">Load Game</a>
    </div>

    <div class="content active" id="workTab">
        <h2>Work</h2>
        <button id="workButton">Work</button>
        <p id="economyMessage"></p>
    </div>

    <div class="content" id="searchTab">
        <h2>Search</h2>
        <button id="searchZenasButton">Search for Zenas</button>
        <p id="economyMessage"></p>
    </div>

    <div class="content" id="crimeTab">
        <h2>Crime</h2>
        <button id="crimeButton">Commit a Crime</button>
        <p id="economyMessage"></p>
    </div>

    <div class="content" id="huntTab">
        <h2>Hunt</h2>
        <button id="huntButton">Hunt</button>
        <p id="huntResult"></p>
    </div>

    <div class="content" id="fishTab">
        <h2>Fish</h2>
        <button id="fishButton">Fish</button>
        <p id="fishResult"></p>
    </div>

    <div class="content" id="shopTab">
        <h2>Shop</h2>
        <button id="buyRifleButton">Buy Rifle (50 Zenas)</button>
        <button id="buyFishingRodButton">Buy Fishing Rod (30 Zenas)</button>
        <p id="shopMessage"></p>
    </div>

    <div class="content" id="bankTab">
        <h2>Bank</h2>
        <button id="depositButton">Deposit</button>
        <button id="withdrawButton">Withdraw</button>
        <p id="bankMessage"></p>
    </div>

    <p>Balance: <span id="balanceDisplay">0</span> Zenas</p>
    <p>Animals Caught: <span id="animalsDisplay"></span></p>
    <p>Fish Caught: <span id="fishDisplay"></span></p>

    <script>
        let balance = 0;
        let bankBalance = 0;
        let lastWorkTime = 0;
        let lastSearchTime = 0;
        let lastCrimeTime = 0;
        let lastHuntTime = 0;
        let lastFishTime = 0;

        // Initialize inventory
        const inventory = {
            Animals: {},
            Fish: {},
            "Rifle": 0,
            "Fishing Rod": 0,
        };

        function loadGame() {
            const savedData = JSON.parse(localStorage.getItem('gameData'));
            if (savedData) {
                balance = savedData.balance;
                bankBalance = savedData.bankBalance;
                lastWorkTime = savedData.lastWorkTime;
                lastSearchTime = savedData.lastSearchTime;
                lastCrimeTime = savedData.lastCrimeTime;
                lastHuntTime = savedData.lastHuntTime;
                lastFishTime = savedData.lastFishTime;
                Object.assign(inventory, savedData.inventory);
                updateDisplay();
                alert("Game loaded successfully!");
            } else {
                alert("No saved game found.");
            }
        }

        function saveGame() {
            const gameData = {
                balance,
                bankBalance,
                lastWorkTime,
                lastSearchTime,
                lastCrimeTime,
                lastHuntTime,
                lastFishTime,
                inventory,
            };
            localStorage.setItem('gameData', JSON.stringify(gameData));
            alert("Game saved successfully!");
        }

        function updateDisplay() {
            document.getElementById('balanceDisplay').innerText = balance;
            document.getElementById('animalsDisplay').innerText = formatInventory(inventory.Animals);
            document.getElementById('fishDisplay').innerText = formatInventory(inventory.Fish);
            updateBalanceDisplay();
        }

        function formatInventory(itemInventory) {
            return Object.entries(itemInventory).map(([item, amount]) => `${item} x ${amount}`).join(', ') || 'None';
        }

        function updateBalanceDisplay() {
            document.getElementById('balanceDisplay').innerText = balance;
        }

        function showTab(tabName) {
            console.log(`Switching to tab: ${tabName}`);
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            document.querySelectorAll('.topnav a').forEach(link => {
                link.classList.remove('active');
                if (link.innerText.toLowerCase() === tabName.replace('Tab', '').toLowerCase()) {
                    link.classList.add('active');
                }
            });
        }

        // Example of random outcome generators
        function randomizeJob() {
            const jobs = ["Freelancer", "Merchant", "Miner", "Artist", "Fisherman"];
            const selectedJob = jobs[Math.floor(Math.random() * jobs.length)];
            return `You worked as a ${selectedJob} and earned 50 Zenas!`;
        }

        function randomizePlace() {
            const places = ["Forest", "Beach", "Mountains", "City", "Desert"];
            const selectedPlace = places[Math.floor(Math.random() * places.length)];
            return `You went to the ${selectedPlace} to search for Zenas and found 20 Zenas!`;
        }

        function randomizeCrime() {
            const crimes = [
                { name: "Pickpocket", reward: 50, failChance: 0.3 },
                { name: "Heist", reward: 100, failChance: 0.5 },
                { name: "Forgery", reward: 70, failChance: 0.4 },
                { name: "Smuggling", reward: 90, failChance: 0.6 },
                { name: "Fraud", reward: 120, failChance: 0.2 }
            ];
            const selectedCrime = crimes[Math.floor(Math.random() * crimes.length)];
            if (Math.random() < selectedCrime.failChance) {
                return `You failed to commit a crime and earned no Zenas.`;
            } else {
                return `You committed ${selectedCrime.name} and earned Zenas ${selectedCrime.reward}!`;
            }
        }

        // Update hunting and fishing functions
        function randomizeHunt() {
            const animals = [
                { name: "Deer", failChance: 0.4 },
                { name: "Rabbit", failChance: 0.3 },
                { name: "Wild Boar", failChance: 0.5 },
                { name: "Bear", failChance: 0.6 }
            ];
            const selectedAnimal = animals[Math.floor(Math.random() * animals.length)];
            if (Math.random() < selectedAnimal.failChance) {
                return `You failed to catch a ${selectedAnimal.name}.`;
            } else {
                const amount = Math.floor(Math.random() * 3) + 1; // Catch 1-3 animals
                inventory.Animals[selectedAnimal.name] = (inventory.Animals[selectedAnimal.name] || 0) + amount;
                return `${selectedAnimal.name} x ${amount}`;
            }
        }

        function randomizeFish() {
            const fishes = [
                { name: "Trout", failChance: 0.3 },
                { name: "Salmon", failChance: 0.4 },
                { name: "Catfish", failChance: 0.5 },
                { name: "Tuna", failChance: 0.6 }
            ];
            const selectedFish = fishes[Math.floor(Math.random() * fishes.length)];
            if (Math.random() < selectedFish.failChance) {
                return `You failed to catch a ${selectedFish.name}.`;
            } else {
                const amount = Math.floor(Math.random() * 3) + 1; // Catch 1-3 fish
                inventory.Fish[selectedFish.name] = (inventory.Fish[selectedFish.name] || 0) + amount;
                return `${selectedFish.name} x ${amount}`;
            }
        }

        // Event Listeners
        document.getElementById('workButton').addEventListener('click', () => {
            const currentTime = Date.now();
            if (currentTime - lastWorkTime < 24 * 60 * 60 * 1000) {
                alert("You can only work once per day.");
                return;
            }
            lastWorkTime = currentTime;
            const message = randomizeJob();
            balance += 50; // Example balance increase
            updateDisplay();
            saveGame(); // Save after working
            alert(message);
        });

        document.getElementById('searchZenasButton').addEventListener('click', () => {
            const currentTime = Date.now();
            if (currentTime - lastSearchTime < 30 * 60 * 1000) {
                alert("You can only search for Zenas once every 30 minutes.");
                return;
            }
            lastSearchTime = currentTime;
            const message = randomizePlace();
            balance += 20; // Example balance increase
            updateDisplay();
            saveGame(); // Save after searching
            alert(message);
        });

        document.getElementById('crimeButton').addEventListener('click', () => {
            const currentTime = Date.now();
            if (currentTime - lastCrimeTime < 30 * 60 * 1000) {
                alert("You can only commit a crime once every 30 minutes.");
                return;
            }
            lastCrimeTime = currentTime;
            const message = randomizeCrime();
            if (message.includes('earned')) {
                const reward = parseInt(message.match(/\d+/)[0]);
                balance += reward; // Example balance increase
                updateDisplay();
                saveGame(); // Save after committing crime
            }
            alert(message);
        });

        document.getElementById('huntButton').addEventListener('click', () => {
            const currentTime = Date.now();
            if (currentTime - lastHuntTime < 60 * 60 * 1000) {
                alert("You can only hunt once every hour.");
                return;
            }
            lastHuntTime = currentTime;
            const message = randomizeHunt();
            document.getElementById('huntResult').innerText = message;
            updateDisplay();
            saveGame(); // Save after hunting
        });

        document.getElementById('fishButton').addEventListener('click', () => {
            const currentTime = Date.now();
            if (currentTime - lastFishTime < 60 * 60 * 1000) {
                alert("You can only fish once every hour.");
                return;
            }
            lastFishTime = currentTime;
            const message = randomizeFish();
            document.getElementById('fishResult').innerText = message;
            updateDisplay();
            saveGame(); // Save after fishing
        });

        document.getElementById('buyRifleButton').addEventListener('click', () => {
            if (balance >= 50) {
                balance -= 50;
                inventory.Rifle++;
                updateDisplay();
                saveGame(); // Save after buying
                document.getElementById('shopMessage').innerText = "You bought a Rifle!";
            } else {
                document.getElementById('shopMessage').innerText = "Not enough Zenas!";
            }
        });

        document.getElementById('buyFishingRodButton').addEventListener('click', () => {
            if (balance >= 30) {
                balance -= 30;
                inventory["Fishing Rod"]++;
                updateDisplay();
                saveGame(); // Save after buying
                document.getElementById('shopMessage').innerText = "You bought a Fishing Rod!";
            } else {
                document.getElementById('shopMessage').innerText = "Not enough Zenas!";
            }
        });

        document.getElementById('depositButton').addEventListener('click', () => {
            const amountToDeposit = prompt('Enter amount to deposit:');
            const amount = parseInt(amountToDeposit);
            if (isNaN(amount) || amount <= 0 || amount > balance) {
                alert('Invalid deposit amount!');
                return;
            }
            bankBalance += amount;
            balance -= amount;
            updateDisplay();
            document.getElementById('bankMessage').innerText = `You deposited Zenas ${amount}!`;
            saveGame(); // Save after depositing
        });

        document.getElementById('withdrawButton').addEventListener('click', () => {
            const amountToWithdraw = prompt('Enter amount to withdraw:');
            const amount = parseInt(amountToWithdraw);
            if (isNaN(amount) || amount <= 0 || amount > bankBalance) {
                alert('Invalid withdrawal amount!');
                return;
            }
            bankBalance -= amount;
            balance += amount;
            updateDisplay();
            document.getElementById('bankMessage').innerText = `You withdrew Zenas ${amount}!`;
            saveGame(); // Save after withdrawing
        });

        // Initial load
        updateDisplay();
    </script>
</body>

</html>
